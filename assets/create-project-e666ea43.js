import{R as c,r,S as he,_ as Re,w as z,k as Ge,l as d,n as _,q as t,c as l,Y as Q,I as n,x as a,A as Me,s as f,J as V,K as y,N as k,v as x,Z as Je}from"./index-a69e0c82.js";import{u as ie}from"./project-19dde2b2.js";import{u as de}from"./region-7f4b6c0d.js";import{u as ne}from"./client-5537c3a9.js";import{u as ve}from"./driver-fb3fe64c.js";import{u as ce}from"./truck-8406cd86.js";import{u as fe}from"./heavyVehicle-a28caf3e.js";import{u as pe}from"./station-88358ae3.js";import{u as Ve}from"./checker-f2b07ddc.js";import{u as ge}from"./technicalAdmin-1e8e9081.js";import{u as be}from"./gasOperator-0a65d517.js";import{V as o,b as R,e as Fe,a as $}from"./VRow-03344ab6.js";import{V as Le}from"./VDialog-d7a653e8.js";import{V as He}from"./VForm-fb065eef.js";import{V as Ie}from"./VStepper-9bc7643f.js";import{V as v}from"./VTextField-03e38bc1.js";import{V as i}from"./VAutocomplete-1e982d1d.js";import{V as $e}from"./VTextarea-d6921a11.js";import{V as P}from"./VChip-707cc8ab.js";import"./VGrid-b0831086.js";import"./VOverlay-64f59fed.js";import"./forwardRefs-e658ad70.js";import"./VMenu-97c043ff.js";import"./index-7cec823b.js";import"./VDivider-e33b9f13.js";import"./VSelect-2adf8cee.js";import"./VSelectionControl-88f5bb81.js";const qe=f("h2",{class:"mb-0"}," Tambah Projek ",-1),Ee={class:"p-5"},Ye=f("span",{class:"text-body-2"}," Rp ",-1),Ze={class:"d-flex flex-wrap"},ze={class:"d-flex flex-wrap"},Qe={class:"d-flex flex-wrap"},We={class:"d-flex flex-wrap"},Xe={class:"d-flex flex-wrap"},el={class:"d-flex flex-wrap"},ll={class:"d-flex flex-wrap"},Dl={__name:"create-project",setup(al){const{projectStatus:_e,loading:tl,error:u}=c(ie()),{createProject:ye,fetchProjectStatus:ke}=ie();ke();const{provinces:q,regencies:E,districts:Y,subdistricts:Z}=c(de()),{fetchProvinces:xe,fetchRegencies:Ue,fetchDistricts:Ae,fetchSubdistricts:Se}=de();xe();const{clients:W}=c(ne()),{fetchClients:Te}=ne(),{drivers:X}=c(ve()),{fetchDrivers:Pe}=ve(),{trucks:ee}=c(ce()),{fetchTrucks:je}=ce(),{heavyVehicles:le}=c(fe()),{fetchHeavyVehicles:we}=fe(),{stations:ae}=c(pe()),{fetchStations:Ce}=pe(),{checkers:te}=c(Ve()),{fetchCheckers:De}=Ve(),{technicalAdmins:se}=c(ge()),{fetchTechnicalAdmins:Ke}=ge(),{gasOperators:ue}=c(be()),{fetchGasOperators:Ne}=be();Te(),Pe(),je(),we(),Ce(),De(),Ke(),Ne();const j=r("AUTO"),w=r(""),C=r(""),D=r(""),K=r(""),N=r(""),g=r(""),O=r(""),U=r(""),A=r(""),S=r(""),B=r(""),h=r(""),G=r([]),M=r([]),J=r([]),F=r([]),L=r([]),H=r([]),I=r([]),Oe=()=>{j.value="AUTO",w.value="",C.value="",D.value="",K.value="",N.value="",g.value="",O.value="",U.value="",A.value="",S.value="",B.value="",h.value="",G.value=[],M.value=[],J.value=[],F.value=[],L.value=[],H.value=[],I.value=[]},Be=()=>{var m,oe,re,me;const b=(m=q.value.find(T=>T.id===U.value))==null?void 0:m.nama,s=(oe=E.value.find(T=>T.id===A.value))==null?void 0:oe.nama,p=(re=Y.value.find(T=>T.id===S.value))==null?void 0:re.nama,e=(me=Z.value.find(T=>T.id===B.value))==null?void 0:me.nama;ye({code:j.value,name:w.value,description:C.value,start_date:D.value,end_date:K.value,person_in_charge:N.value,amount:g.value.replace(/\D/g,""),client_id:O.value,province:b,regency:s,district:p,subdistrict:e,status:h.value,drivers:G.value,trucks:M.value,heavy_vehicles:J.value,stations:F.value,checkers:L.value,technical_admins:H.value,gas_operators:I.value})};return he(()=>{document.title="Tambah Projek"}),Re(()=>{Oe(),u.value=null}),z(U,b=>{Ue(b)}),z(A,b=>{Ae(b)}),z(S,b=>{Se(b)}),(b,s)=>{const p=Ge("Text");return d(),_($,null,{default:t(()=>[l(o,{cols:"12",class:"d-flex justify-space-between align-items-center"},{default:t(()=>[qe,l(Q,{to:"/admin/project",color:"primary"},{default:t(()=>[n(" Kembali ")]),_:1})]),_:1}),l(Le,{modelValue:a(u),"onUpdate:modelValue":s[1]||(s[1]=e=>Me(u)?u.value=e:null),persistent:"","max-width":"390"},{default:t(()=>[l(R,null,{default:t(()=>[f("div",Ee,[(d(!0),V(y,null,k(a(u),(e,m)=>(d(),V("p",{key:m},x(e.join(", ")),1))),128))]),l(Fe,null,{default:t(()=>[l(Q,{text:"",onClick:s[0]||(s[0]=e=>u.value=null)},{default:t(()=>[n(" Close ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(o,{cols:"12"},{default:t(()=>[l(R,null,{default:t(()=>[l(He,{onSubmit:Je(Be,["prevent"])},{default:t(()=>[l(Ie,{items:["Umum","Lokasi","Personil","Preview"],"next-text":"Selanjutnya","prev-text":"Sebelumnya","alt-labels":""},{"item.1":t(()=>[l(R,{title:"Umum",flat:""},{default:t(()=>[l($,null,{default:t(()=>[l(o,{cols:"12",md:"6"},{default:t(()=>[l(v,{modelValue:j.value,"onUpdate:modelValue":s[2]||(s[2]=e=>j.value=e),label:"Kode",placeholder:"Kode Projek","error-messages":a(u)&&a(u).code?[a(u).code]:[]},null,8,["modelValue","error-messages"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(v,{modelValue:w.value,"onUpdate:modelValue":s[3]||(s[3]=e=>w.value=e),label:"Nama",placeholder:"Nama Projek","error-messages":a(u)&&a(u).name?[a(u).name]:[]},null,8,["modelValue","error-messages"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(v,{modelValue:D.value,"onUpdate:modelValue":s[4]||(s[4]=e=>D.value=e),label:"Tanggal Mulai",placeholder:"Tanggal Mulai Projek",type:"date","error-messages":a(u)&&a(u).start_date?[a(u).start_date]:[]},null,8,["modelValue","error-messages"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(v,{modelValue:K.value,"onUpdate:modelValue":s[5]||(s[5]=e=>K.value=e),label:"Tanggal Selesai",placeholder:"Tanggal Selesai Projek",type:"date","error-messages":a(u)&&a(u).end_date?[a(u).end_date]:[]},null,8,["modelValue","error-messages"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(v,{modelValue:N.value,"onUpdate:modelValue":s[6]||(s[6]=e=>N.value=e),label:"Penanggung Jawab",placeholder:"Penanggung Jawab Projek","error-messages":a(u)&&a(u).person_in_charge?[a(u).person_in_charge]:[]},null,8,["modelValue","error-messages"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(v,{modelValue:g.value,"onUpdate:modelValue":s[7]||(s[7]=e=>g.value=e),label:"Nilai Projek",placeholder:"Nilai Projek","error-messages":a(u)&&a(u).amount?[a(u).amount]:[],onInput:s[8]||(s[8]=e=>g.value=g.value.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","))},{"prepend-inner":t(()=>[Ye]),_:1},8,["modelValue","error-messages"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(i,{modelValue:O.value,"onUpdate:modelValue":s[9]||(s[9]=e=>O.value=e),label:"Client",items:a(W),"error-messages":a(u)&&a(u).client_id?[a(u).client_id]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(i,{modelValue:h.value,"onUpdate:modelValue":s[10]||(s[10]=e=>h.value=e),label:"Status",items:a(_e),"item-title":e=>e.name,"error-messages":a(u)&&a(u).status?[a(u).status]:[]},null,8,["modelValue","items","item-title","error-messages"])]),_:1}),l(o,{cols:"12",md:"12"},{default:t(()=>[l($e,{modelValue:C.value,"onUpdate:modelValue":s[11]||(s[11]=e=>C.value=e),label:"Deskripsi",placeholder:"Deskripsi Projek","error-messages":a(u)&&a(u).description?[a(u).description]:[]},null,8,["modelValue","error-messages"])]),_:1})]),_:1})]),_:1})]),"item.2":t(()=>[l(R,{title:"Lokasi",flat:""},{default:t(()=>[l($,null,{default:t(()=>[l(o,{cols:"12",md:"6"},{default:t(()=>[l(i,{modelValue:U.value,"onUpdate:modelValue":s[12]||(s[12]=e=>U.value=e),label:"Provinsi",items:a(q),"error-messages":a(u)&&a(u).province?[a(u).province]:[],"item-title":e=>e.nama,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(i,{modelValue:A.value,"onUpdate:modelValue":s[13]||(s[13]=e=>A.value=e),label:"Kabupaten/Kota",items:a(E),"error-messages":a(u)&&a(u).regency?[a(u).regency]:[],"item-title":e=>e.nama,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(i,{modelValue:S.value,"onUpdate:modelValue":s[14]||(s[14]=e=>S.value=e),label:"Kecamatan",items:a(Y),"error-messages":a(u)&&a(u).district?[a(u).district]:[],"item-title":e=>e.nama,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(i,{modelValue:B.value,"onUpdate:modelValue":s[15]||(s[15]=e=>B.value=e),label:"Kelurahan/Desa",items:a(Z),"error-messages":a(u)&&a(u).subdistrict?[a(u).subdistrict]:[],"item-title":e=>e.nama,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1})]),_:1})]),_:1})]),"item.3":t(()=>[l(R,{title:"Personil",flat:""},{default:t(()=>[l($,null,{default:t(()=>[l(o,{cols:"12",md:"6"},{default:t(()=>[l(i,{modelValue:G.value,"onUpdate:modelValue":s[16]||(s[16]=e=>G.value=e),label:"Driver",items:a(X),multiple:"","error-messages":a(u)&&a(u).driverArr?[a(u).driverArr]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(i,{modelValue:M.value,"onUpdate:modelValue":s[17]||(s[17]=e=>M.value=e),label:"Truck",items:a(ee),multiple:"","error-messages":a(u)&&a(u).truckArr?[a(u).truckArr]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(i,{modelValue:J.value,"onUpdate:modelValue":s[18]||(s[18]=e=>J.value=e),label:"Alat Berat",items:a(le),multiple:"","error-messages":a(u)&&a(u).heavyVehicleArr?[a(u).heavyVehicleArr]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(i,{modelValue:F.value,"onUpdate:modelValue":s[19]||(s[19]=e=>F.value=e),label:"Station",items:a(ae),multiple:"","error-messages":a(u)&&a(u).stationArr?[a(u).stationArr]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(i,{modelValue:L.value,"onUpdate:modelValue":s[20]||(s[20]=e=>L.value=e),label:"Checker",items:a(te),multiple:"","error-messages":a(u)&&a(u).checkerArr?[a(u).checkerArr]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(i,{modelValue:H.value,"onUpdate:modelValue":s[21]||(s[21]=e=>H.value=e),label:"Technical Admin",items:a(se),multiple:"","error-messages":a(u)&&a(u).technicalAdminArr?[a(u).technicalAdminArr]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(o,{cols:"12",md:"12"},{default:t(()=>[l(i,{modelValue:I.value,"onUpdate:modelValue":s[22]||(s[22]=e=>I.value=e),label:"Gas Operator",items:a(ue),multiple:"","error-messages":a(u)&&a(u).gasOperatorArr?[a(u).gasOperatorArr]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1})]),_:1})]),_:1})]),"item.4":t(()=>[l(R,{title:"Preview",flat:""},{default:t(()=>[l($,null,{default:t(()=>[l(o,{cols:"12",md:"6"},{default:t(()=>[l(v,{modelValue:j.value,"onUpdate:modelValue":s[23]||(s[23]=e=>j.value=e),label:"Kode",readonly:""},null,8,["modelValue"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(v,{modelValue:w.value,"onUpdate:modelValue":s[24]||(s[24]=e=>w.value=e),label:"Nama",readonly:""},null,8,["modelValue"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(v,{modelValue:C.value,"onUpdate:modelValue":s[25]||(s[25]=e=>C.value=e),label:"Deskripsi",readonly:""},null,8,["modelValue"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(v,{modelValue:D.value,"onUpdate:modelValue":s[26]||(s[26]=e=>D.value=e),label:"Tanggal Mulai",readonly:""},null,8,["modelValue"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(v,{modelValue:K.value,"onUpdate:modelValue":s[27]||(s[27]=e=>K.value=e),label:"Tanggal Selesai",readonly:""},null,8,["modelValue"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(v,{modelValue:N.value,"onUpdate:modelValue":s[28]||(s[28]=e=>N.value=e),label:"Penanggung Jawab",readonly:""},null,8,["modelValue"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(v,{modelValue:g.value,"onUpdate:modelValue":s[29]||(s[29]=e=>g.value=e),label:"Pendapatan",readonly:""},null,8,["modelValue"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(i,{modelValue:O.value,"onUpdate:modelValue":s[30]||(s[30]=e=>O.value=e),label:"Client",items:a(W),"item-title":e=>e.name,"item-value":e=>e.id,readonly:""},null,8,["modelValue","items","item-title","item-value"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(i,{modelValue:U.value,"onUpdate:modelValue":s[31]||(s[31]=e=>U.value=e),label:"Provinsi",items:a(q),"item-title":e=>e.nama,"item-value":e=>e.id,readonly:""},null,8,["modelValue","items","item-title","item-value"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(i,{modelValue:A.value,"onUpdate:modelValue":s[32]||(s[32]=e=>A.value=e),label:"Kabupaten/Kota",items:a(E),"item-title":e=>e.nama,"item-value":e=>e.id,readonly:""},null,8,["modelValue","items","item-title","item-value"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(i,{modelValue:S.value,"onUpdate:modelValue":s[33]||(s[33]=e=>S.value=e),label:"Kecamatan",items:a(Y),"item-title":e=>e.nama,"item-value":e=>e.id,readonly:""},null,8,["modelValue","items","item-title","item-value"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(i,{modelValue:B.value,"onUpdate:modelValue":s[34]||(s[34]=e=>B.value=e),label:"Kelurahan/Desa",items:a(Z),"item-title":e=>e.nama,"item-value":e=>e.id,readonly:""},null,8,["modelValue","items","item-title","item-value"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(v,{modelValue:h.value,"onUpdate:modelValue":s[35]||(s[35]=e=>h.value=e),label:"Status",readonly:""},null,8,["modelValue"])]),_:1}),l(o,{cols:"12",md:"6",class:"d-flex flex-column"},{default:t(()=>[l(p,null,{default:t(()=>[n(" Driver ")]),_:1}),f("div",Ze,[(d(!0),V(y,null,k(a(X).filter(e=>G.value.includes(e.id)),(e,m)=>(d(),_(P,{key:m,label:"Driver",color:"primary",class:"mr-2 mb-2"},{default:t(()=>[n(x(e.name),1)]),_:2},1024))),128))])]),_:1}),l(o,{cols:"12",md:"6",class:"d-flex flex-column"},{default:t(()=>[l(p,null,{default:t(()=>[n(" Truck ")]),_:1}),f("div",ze,[(d(!0),V(y,null,k(a(ee).filter(e=>M.value.includes(e.id)),(e,m)=>(d(),_(P,{key:m,label:"Truck",color:"primary",class:"mr-2 mb-2"},{default:t(()=>[n(x(e.name),1)]),_:2},1024))),128))])]),_:1}),l(o,{cols:"12",md:"6",class:"d-flex flex-column"},{default:t(()=>[l(p,null,{default:t(()=>[n(" Alat Berat ")]),_:1}),f("div",Qe,[(d(!0),V(y,null,k(a(le).filter(e=>J.value.includes(e.id)),(e,m)=>(d(),_(P,{key:m,label:"Alat Berat",color:"primary",class:"mr-2 mb-2"},{default:t(()=>[n(x(e.name),1)]),_:2},1024))),128))])]),_:1}),l(o,{cols:"12",md:"6",class:"d-flex flex-column"},{default:t(()=>[l(p,null,{default:t(()=>[n(" Station ")]),_:1}),f("div",We,[(d(!0),V(y,null,k(a(ae).filter(e=>F.value.includes(e.id)),(e,m)=>(d(),_(P,{key:m,label:"Station",color:"primary",class:"mr-2 mb-2"},{default:t(()=>[n(x(e.name),1)]),_:2},1024))),128))])]),_:1}),l(o,{cols:"12",md:"6",class:"d-flex flex-column"},{default:t(()=>[l(p,null,{default:t(()=>[n(" Checker ")]),_:1}),f("div",Xe,[(d(!0),V(y,null,k(a(te).filter(e=>L.value.includes(e.id)),(e,m)=>(d(),_(P,{key:m,label:"Checker",color:"primary",class:"mr-2 mb-2"},{default:t(()=>[n(x(e.name),1)]),_:2},1024))),128))])]),_:1}),l(o,{cols:"12",md:"6",class:"d-flex flex-column"},{default:t(()=>[l(p,null,{default:t(()=>[n(" Technical Admin ")]),_:1}),f("div",el,[(d(!0),V(y,null,k(a(se).filter(e=>H.value.includes(e.id)),(e,m)=>(d(),_(P,{key:m,label:"Technical Admin",color:"primary",class:"mr-2 mb-2"},{default:t(()=>[n(x(e.name),1)]),_:2},1024))),128))])]),_:1}),l(o,{cols:"12",md:"6",class:"d-flex flex-column"},{default:t(()=>[l(p,null,{default:t(()=>[n(" Gas Operator ")]),_:1}),f("div",ll,[(d(!0),V(y,null,k(a(ue).filter(e=>I.value.includes(e.id)),(e,m)=>(d(),_(P,{key:m,label:"Gas Operator",color:"primary",class:"mr-2 mb-2"},{default:t(()=>[n(x(e.name),1)]),_:2},1024))),128))])]),_:1}),l(o,{cols:"12",md:"12"},{default:t(()=>[l(Q,{type:"submit",color:"primary",class:"float-right"},{default:t(()=>[n(" Simpan ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};export{Dl as default};
