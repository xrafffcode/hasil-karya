import{j as G,bx as H,R as m,r as d,S as J,_ as L,l as Q,n as W,q as o,c as l,Y as M,I as h,Z as X,x as a,s as $}from"./index-a69e0c82.js";import{u as T}from"./materialMovement-7e598da6.js";import{u as P}from"./driver-fb3fe64c.js";import{u as R}from"./truck-8406cd86.js";import{u as U}from"./station-88358ae3.js";import{u as D}from"./checker-f2b07ddc.js";import{V as i,b as ee,a as C}from"./VRow-03344ab6.js";import{V as ae}from"./VForm-fb065eef.js";import{V as b}from"./VTextField-03e38bc1.js";import{b as k}from"./VSelect-2adf8cee.js";import{V as te}from"./VTextarea-d6921a11.js";import"./VGrid-b0831086.js";import"./forwardRefs-e658ad70.js";import"./index-7cec823b.js";import"./VMenu-97c043ff.js";import"./VDivider-e33b9f13.js";import"./VOverlay-64f59fed.js";import"./VSelectionControl-88f5bb81.js";import"./VChip-707cc8ab.js";const le=$("h2",{class:"mb-0"}," Edit Material Movement ",-1),ye={__name:"edit-material-movement",setup(oe){const w=G();H();const{drivers:K}=m(P()),{trucks:B}=m(R()),{stations:I}=m(U()),{checkers:A}=m(D()),{fetchDrivers:N}=P(),{fetchTrucks:j}=R(),{fetchStations:E}=U(),{fetchCheckers:F}=D();N(),j(),E({type:"station"}),F();const{loading:O,error:t}=m(T()),{fetchMaterialMovementTechnicalAdmin:q,updateMaterialMovementTechnicalAdmin:Y}=T(),x=w.params.id,u=d(""),n=d(""),c=d(""),v=d(""),p=d(""),_=d(""),f=d(""),V=d(""),g=d(""),Z=d(null),y=async()=>{try{const s=await q(x);u.value=s.code,n.value=s.date,c.value=s.driver.id,v.value=s.truck.id,p.value=s.station.id,_.value=s.checker.id,f.value=s.observation_ratio_percentage*100,V.value=s.solid_ratio*100,g.value=s.remarks,Z.value=s.payment_proof_image}catch(s){console.error(s)}};J(()=>{y(),document.title="Edit Material Movement"});const S=()=>{y()},z=()=>{Y({id:x,code:u.value,date:n.value,driver_id:c.value,truck_id:v.value,station_id:p.value,checker_id:_.value,observation_ratio_percentage:f.value/100,solid_ratio:V.value/100,remarks:g.value})};return L(()=>{S(),t.value=null}),(s,r)=>(Q(),W(C,null,{default:o(()=>[l(i,{cols:"12",class:"d-flex justify-space-between align-items-center"},{default:o(()=>[le,l(M,{to:{name:"technical-admin-material-movement"},color:"primary"},{default:o(()=>[h(" Kembali ")]),_:1})]),_:1}),l(i,{cols:"12"},{default:o(()=>[l(ee,null,{default:o(()=>[l(ae,{onSubmit:X(z,["prevent"])},{default:o(()=>[l(C,null,{default:o(()=>[l(i,{cols:"12",md:"6"},{default:o(()=>[l(b,{modelValue:u.value,"onUpdate:modelValue":r[0]||(r[0]=e=>u.value=e),label:"Kode",placeholder:"Kode Material Movement","error-messages":a(t)&&a(t).code?[a(t).code]:[],disabled:""},null,8,["modelValue","error-messages"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(b,{modelValue:n.value,"onUpdate:modelValue":r[1]||(r[1]=e=>n.value=e),label:"Tanggal",placeholder:"Masukan Tanggal","error-messages":a(t)&&a(t).date?[a(t).date]:[],type:"datetime-local",disabled:""},null,8,["modelValue","error-messages"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(k,{modelValue:c.value,"onUpdate:modelValue":r[2]||(r[2]=e=>c.value=e),items:a(K),label:"Driver",placeholder:"Pilih Driver","error-messages":a(t)&&a(t).driver_id?[a(t).driver_id]:[],"item-title":e=>e.name,"item-value":e=>e.id,disabled:""},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(k,{modelValue:v.value,"onUpdate:modelValue":r[3]||(r[3]=e=>v.value=e),items:a(B),label:"Truck",placeholder:"Pilih Truck","error-messages":a(t)&&a(t).truck_id?[a(t).truck_id]:[],"item-title":e=>e.name,"item-value":e=>e.id,disabled:""},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(k,{modelValue:p.value,"onUpdate:modelValue":r[4]||(r[4]=e=>p.value=e),items:a(I),label:"POS",placeholder:"Pilih POS","error-messages":a(t)&&a(t).station_id?[a(t).station_id]:[],"item-title":e=>e.name,"item-value":e=>e.id,disabled:""},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(k,{modelValue:_.value,"onUpdate:modelValue":r[5]||(r[5]=e=>_.value=e),items:a(A),label:"Pemeriksa",placeholder:"Pilih Pemeriksa","error-messages":a(t)&&a(t).checker_id?[a(t).checker_id]:[],"item-title":e=>e.name,"item-value":e=>e.id,disabled:""},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(b,{modelValue:f.value,"onUpdate:modelValue":r[6]||(r[6]=e=>f.value=e),label:"Presentase Rasio Index",placeholder:"Masukan Presentase Rasio Index","error-messages":a(t)&&a(t).observation_ratio_percentage?[a(t).observation_ratio_percentage]:[],type:"number",step:"1",suffix:"%",disabled:""},null,8,["modelValue","error-messages"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(b,{modelValue:V.value,"onUpdate:modelValue":r[7]||(r[7]=e=>V.value=e),label:"Rasio Padat",placeholder:"Rasio Padat","error-messages":a(t)&&a(t).solid_ratio?[a(t).solid_ratio]:[],type:"number",step:"1",suffix:"%"},null,8,["modelValue","error-messages"])]),_:1}),l(i,{cols:"12",md:"12"},{default:o(()=>[l(te,{modelValue:g.value,"onUpdate:modelValue":r[8]||(r[8]=e=>g.value=e),label:"Keterangan",placeholder:"Keterangan Material Movement","error-messages":a(t)&&a(t).remarks?[a(t).remarks]:[]},null,8,["modelValue","error-messages"])]),_:1}),l(i,{cols:"12",class:"d-flex gap-4"},{default:o(()=>[l(M,{type:"submit",loading:a(O),color:"primary"},{default:o(()=>[h(" Simpan ")]),_:1},8,["loading"]),l(M,{color:"secondary",variant:"tonal",onClick:S},{default:o(()=>[h(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{ye as default};
