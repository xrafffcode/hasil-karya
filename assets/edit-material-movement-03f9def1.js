import{j as H,bx as J,R as d,r as m,S as L,_ as Q,l as W,n as X,q as o,c as l,Y as b,I as h,Z as $,x as a,s as ee}from"./index-a69e0c82.js";import{u as y}from"./materialMovement-7e598da6.js";import{u as P}from"./driver-fb3fe64c.js";import{u as R}from"./truck-8406cd86.js";import{u as T}from"./station-88358ae3.js";import{u as U}from"./checker-f2b07ddc.js";import{t as ae}from"./formatters-87109f83.js";import{V as i,b as te,a as D}from"./VRow-03344ab6.js";import{V as le}from"./VForm-fb065eef.js";import{V as k}from"./VTextField-03e38bc1.js";import{b as M}from"./VSelect-2adf8cee.js";import{V as oe}from"./VTextarea-d6921a11.js";import"./VGrid-b0831086.js";import"./forwardRefs-e658ad70.js";import"./index-7cec823b.js";import"./VMenu-97c043ff.js";import"./VDivider-e33b9f13.js";import"./VOverlay-64f59fed.js";import"./VSelectionControl-88f5bb81.js";import"./VChip-707cc8ab.js";const re=ee("h2",{class:"mb-0"}," Edit Material Movement ",-1),Te={__name:"edit-material-movement",setup(se){const C=H(),w=J(),{drivers:I}=d(P()),{trucks:K}=d(R()),{stations:B}=d(T()),{checkers:N}=d(U()),{fetchDrivers:O}=P(),{fetchTrucks:j}=R(),{fetchStations:E}=T(),{fetchCheckers:F}=U();O(),j(),E({type:"station"}),F();const{materialMovement:ie,loading:q,error:t}=d(y()),{fetchMaterialMovement:Y,updateMaterialMovement:Z}=y(),S=C.params.id,u=m(""),n=m(""),c=m(""),v=m(""),p=m(""),_=m(""),f=m(""),V=m(""),g=m(""),z=m(null),x=async()=>{try{const s=await Y(S);console.log(w.parseISO(s.date)),u.value=s.code,n.value=s.date,c.value=s.driver.id,v.value=s.truck.id,p.value=s.station.id,_.value=s.checker.id,f.value=s.observation_ratio_percentage*100,V.value=ae(s.solid_ratio),g.value=s.remarks,z.value=s.payment_proof_image}catch(s){console.error(s)}};L(()=>{x(),document.title="Edit Material Movement"});const A=()=>{Z({id:S,code:u.value,date:n.value,driver_id:c.value,truck_id:v.value,station_id:p.value,checker_id:_.value,observation_ratio_percentage:f.value/100,solid_ratio:V.value,remarks:g.value})};Q(()=>{t.value=null});const G=()=>{x()};return(s,r)=>(W(),X(D,null,{default:o(()=>[l(i,{cols:"12",class:"d-flex justify-space-between align-items-center"},{default:o(()=>[re,l(b,{to:{name:"admin-material-movement"},color:"primary"},{default:o(()=>[h(" Kembali ")]),_:1})]),_:1}),l(i,{cols:"12"},{default:o(()=>[l(te,null,{default:o(()=>[l(le,{onSubmit:$(A,["prevent"])},{default:o(()=>[l(D,null,{default:o(()=>[l(i,{cols:"12",md:"6"},{default:o(()=>[l(k,{modelValue:u.value,"onUpdate:modelValue":r[0]||(r[0]=e=>u.value=e),label:"Kode",placeholder:"Kode Material Movement","error-messages":a(t)&&a(t).code?[a(t).code]:[]},null,8,["modelValue","error-messages"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(k,{modelValue:n.value,"onUpdate:modelValue":r[1]||(r[1]=e=>n.value=e),label:"Tanggal",placeholder:"Masukan Tanggal","error-messages":a(t)&&a(t).date?[a(t).date]:[],type:"datetime-local"},null,8,["modelValue","error-messages"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(M,{modelValue:c.value,"onUpdate:modelValue":r[2]||(r[2]=e=>c.value=e),items:a(I),label:"Driver",placeholder:"Pilih Driver","error-messages":a(t)&&a(t).driver_id?[a(t).driver_id]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(M,{modelValue:v.value,"onUpdate:modelValue":r[3]||(r[3]=e=>v.value=e),items:a(K),label:"Truck",placeholder:"Pilih Truck","error-messages":a(t)&&a(t).truck_id?[a(t).truck_id]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(M,{modelValue:p.value,"onUpdate:modelValue":r[4]||(r[4]=e=>p.value=e),items:a(B),label:"POS",placeholder:"Pilih POS","error-messages":a(t)&&a(t).station_id?[a(t).station_id]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(M,{modelValue:_.value,"onUpdate:modelValue":r[5]||(r[5]=e=>_.value=e),items:a(N),label:"Pemeriksa",placeholder:"Pilih Pemeriksa","error-messages":a(t)&&a(t).checker_id?[a(t).checker_id]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(k,{modelValue:f.value,"onUpdate:modelValue":r[6]||(r[6]=e=>f.value=e),label:"Presentase Rasio Index",placeholder:"Masukan Presentase Rasio Index","error-messages":a(t)&&a(t).observation_ratio_percentage?[a(t).observation_ratio_percentage]:[],type:"number",step:"1",suffix:"%"},null,8,["modelValue","error-messages"])]),_:1}),l(i,{cols:"12",md:"6"},{default:o(()=>[l(k,{modelValue:V.value,"onUpdate:modelValue":r[7]||(r[7]=e=>V.value=e),label:"Rasio Padat",placeholder:"Rasio Padat","error-messages":a(t)&&a(t).solid_ratio?[a(t).solid_ratio]:[],step:"1"},null,8,["modelValue","error-messages"])]),_:1}),l(i,{cols:"12",md:"12"},{default:o(()=>[l(oe,{modelValue:g.value,"onUpdate:modelValue":r[8]||(r[8]=e=>g.value=e),label:"Keterangan",placeholder:"Keterangan Material Movement","error-messages":a(t)&&a(t).remarks?[a(t).remarks]:[]},null,8,["modelValue","error-messages"])]),_:1}),l(i,{cols:"12",class:"d-flex gap-4"},{default:o(()=>[l(b,{type:"submit",loading:a(q),color:"primary"},{default:o(()=>[h(" Simpan ")]),_:1},8,["loading"]),l(b,{color:"secondary",variant:"tonal",onClick:G},{default:o(()=>[h(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{Te as default};
