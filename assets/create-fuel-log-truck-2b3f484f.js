import{P as n,r as u,Q as q,X as E,l as O,J,x as l,n as Q,q as r,c as a,I as p,v as X,S as T,A as h,O as H,T as W,K as Y,s as Z}from"./index-d8570b98.js";import{u as x}from"./fuelLog-8188d5dc.js";import{u as y}from"./driver-4b8ac86d.js";import{u as U}from"./truck-17634e1b.js";import{u as M}from"./station-56b545b2.js";import{u as w}from"./gasOperator-497adca5.js";import{b as C,d as ee,e as le,V as s,a as K}from"./VRow-ae8b4a94.js";import{V as ae}from"./VDialog-029e5a82.js";import{V as te}from"./VForm-c95c40f9.js";import{V as b}from"./VTextField-d53f6a8a.js";import{V as S}from"./VAutocomplete-90f07087.js";import{V as oe}from"./VTextarea-c1327748.js";import"./VGrid-aa4a8c47.js";import"./VOverlay-f87aa014.js";import"./forwardRefs-49923578.js";import"./VSelect-e5c25370.js";import"./VMenu-f39875ea.js";import"./VSelectionControl-d26b90d8.js";const re=Z("h2",{class:"mb-0"}," Catat BBM Truk ",-1),xe={__name:"create-fuel-log-truck",setup(se){const{gasOperators:P}=n(w()),{drivers:F}=n(y()),{trucks:A}=n(U()),{stations:I}=n(M()),{fetchGasOperators:L}=w(),{fetchDrivers:R}=y(),{fetchTrucks:N}=U(),{fetchStations:j}=M();L(),R(),N(),j({type:"gas_station"});const{success:m,loading:z,error:t}=n(x()),{createFuelLogTruck:G}=x(),v=u("AUTO"),f=u(new Date(Date.now()-new Date().getTimezoneOffset()*6e4).toISOString().substr(0,16)),c=u(""),g=u(""),V=u(""),_=u(""),B=u("diesel"),d=u(""),i=u(""),k=u(""),D=()=>{v.value="AUTO",f.value=new Date(Date.now()-new Date().getTimezoneOffset()*6e4).toISOString().substr(0,16),c.value="",g.value="",V.value="",_.value="",B.value="diesel",d.value="",i.value="",k.value=""},$=()=>{G({code:v.value,date:f.value.split("T").join(" ")+":00",truck_id:c.value,driver_id:g.value,station_id:V.value,gas_operator_id:_.value,fuel_type:B.value,volume:d.value.replace(/\D/g,""),odometer:i.value.replace(/\D/g,""),remarks:k.value}),D()};return q(()=>{document.title="Tambah Data Pencatatan BBM Truk"}),E(()=>{D(),t.value=null}),(ue,o)=>(O(),J(Y,null,[l(m)?(O(),Q(ae,{key:0,modelValue:l(m),"onUpdate:modelValue":o[1]||(o[1]=e=>h(m)?m.value=e:null),"max-width":"400"},{default:r(()=>[a(C,null,{default:r(()=>[a(ee,null,{default:r(()=>[p(X(l(m)),1)]),_:1}),a(le,null,{default:r(()=>[a(T,{color:"primary",text:"",onClick:o[0]||(o[0]=()=>m.value=null)},{default:r(()=>[p(" Tutup ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])):H("",!0),a(K,null,{default:r(()=>[a(s,{cols:"12",class:"d-flex justify-space-between align-items-center"},{default:r(()=>[re,a(T,{to:"/admin/fuel-log",color:"primary",text:""},{default:r(()=>[p(" Kembali ")]),_:1})]),_:1}),a(s,{cols:"12"},{default:r(()=>[a(C,null,{default:r(()=>[a(te,{onSubmit:W($,["prevent"])},{default:r(()=>[a(K,null,{default:r(()=>[a(s,{cols:"12",md:"6"},{default:r(()=>[a(b,{modelValue:v.value,"onUpdate:modelValue":o[2]||(o[2]=e=>v.value=e),label:"Kode",placeholder:"Kode","error-messages":l(t)&&l(t).code?[l(t).code]:[]},null,8,["modelValue","error-messages"])]),_:1}),a(s,{cols:"12",md:"6"},{default:r(()=>[a(b,{modelValue:f.value,"onUpdate:modelValue":o[3]||(o[3]=e=>f.value=e),label:"Tanggal",placeholder:"Tanggal",type:"datetime-local","error-messages":l(t)&&l(t).date?[l(t).date]:[]},null,8,["modelValue","error-messages"])]),_:1}),a(s,{cols:"12",md:"6"},{default:r(()=>[a(S,{modelValue:_.value,"onUpdate:modelValue":o[4]||(o[4]=e=>_.value=e),items:l(P),label:"Solar Man",placeholder:"Pilih Operator","error-messages":l(t)&&l(t).gas_operator_id?[l(t).gas_operator_id]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),a(s,{cols:"12",md:"6"},{default:r(()=>[a(S,{modelValue:g.value,"onUpdate:modelValue":o[5]||(o[5]=e=>g.value=e),items:l(F),label:"Driver",placeholder:"Pilih Driver","error-messages":l(t)&&l(t).driver_id?[l(t).driver_id]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),a(s,{cols:"12",md:"6"},{default:r(()=>[a(S,{modelValue:c.value,"onUpdate:modelValue":o[6]||(o[6]=e=>c.value=e),items:l(A),label:"Truck",placeholder:"Pilih Truck","error-messages":l(t)&&l(t).truck_id?[l(t).truck_id]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),a(s,{cols:"12",md:"6"},{default:r(()=>[a(S,{modelValue:V.value,"onUpdate:modelValue":o[7]||(o[7]=e=>V.value=e),items:l(I),label:"POS",placeholder:"Pilih POS","error-messages":l(t)&&l(t).station_id?[l(t).station_id]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),a(s,{cols:"12",md:"6"},{default:r(()=>[a(b,{modelValue:d.value,"onUpdate:modelValue":o[8]||(o[8]=e=>d.value=e),label:"Volume BBM (L)",placeholder:"Masukan Volume BBM (L)","error-messages":l(t)&&l(t).volume?[l(t).volume]:[],onInput:o[9]||(o[9]=e=>d.value=d.value.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,"."))},null,8,["modelValue","error-messages"])]),_:1}),a(s,{cols:"12",md:"6"},{default:r(()=>[a(b,{modelValue:i.value,"onUpdate:modelValue":o[10]||(o[10]=e=>i.value=e),label:"Odometer (KM)",placeholder:"Masukan Odometer (KM)","error-messages":l(t)&&l(t).odometer?[l(t).odometer]:[],onInput:o[11]||(o[11]=e=>i.value=i.value.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,"."))},null,8,["modelValue","error-messages"])]),_:1}),a(s,{cols:"12",md:"12"},{default:r(()=>[a(oe,{modelValue:k.value,"onUpdate:modelValue":o[12]||(o[12]=e=>k.value=e),label:"Keterangan",placeholder:"Keterangan Material","error-messages":l(t)&&l(t).remarks?[l(t).remarks]:[]},null,8,["modelValue","error-messages"])]),_:1}),a(s,{cols:"12",class:"d-flex gap-4"},{default:r(()=>[a(T,{type:"submit",loading:l(z),color:"primary"},{default:r(()=>[p(" Simpan ")]),_:1},8,["loading"]),a(T,{color:"secondary",variant:"tonal",onClick:D},{default:r(()=>[p(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64))}};export{xe as default};
