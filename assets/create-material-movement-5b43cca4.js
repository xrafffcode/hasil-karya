import{R as m,r as i,S as z,_ as F,l as q,n as Y,q as o,c as l,Y as b,I as M,Z,x as a,s as E}from"./index-a69e0c82.js";import{u as T}from"./materialMovement-7e598da6.js";import{u as h}from"./driver-fb3fe64c.js";import{u as x}from"./truck-8406cd86.js";import{u as P}from"./station-88358ae3.js";import{u as U}from"./checker-f2b07ddc.js";import{V as s,b as G,a as w}from"./VRow-03344ab6.js";import{V as H}from"./VForm-fb065eef.js";import{V as g}from"./VTextField-03e38bc1.js";import{V as k}from"./VAutocomplete-1e982d1d.js";import{V as J}from"./VTextarea-d6921a11.js";import"./VGrid-b0831086.js";import"./forwardRefs-e658ad70.js";import"./index-7cec823b.js";import"./VSelect-2adf8cee.js";import"./VMenu-97c043ff.js";import"./VDivider-e33b9f13.js";import"./VOverlay-64f59fed.js";import"./VSelectionControl-88f5bb81.js";import"./VChip-707cc8ab.js";const L=E("h2",{class:"mb-0"}," Tambah Material Movement ",-1),ge={__name:"create-material-movement",setup(Q){const{drivers:y}=m(h()),{trucks:D}=m(x()),{stations:R}=m(P()),{checkers:O}=m(U()),{fetchDrivers:C}=h(),{fetchTrucks:I}=x(),{fetchStations:K}=P(),{fetchCheckers:B}=U();C(),I(),K({type:"station"}),B();const{loading:A,error:t}=m(T()),{createMaterialMovement:N}=T(),u=i("AUTO"),d=i(new Date(Date.now()-new Date().getTimezoneOffset()*6e4).toISOString().substr(0,16)),n=i(""),v=i(""),c=i(""),p=i(""),f=i("0"),_=i("0"),V=i(""),S=()=>{u.value="AUTO",d.value=new Date(Date.now()-new Date().getTimezoneOffset()*6e4).toISOString().substr(0,16),n.value="",v.value="",c.value="",p.value="",f.value=0,_.value=0,V.value=""},j=()=>{N({code:u.value,driver_id:n.value,truck_id:v.value,station_id:c.value,checker_id:p.value,date:d.value.split("T").join(" ")+":00",observation_ratio_percentage:f.value/100,solid_ratio:_.value,remarks:V.value})};return z(()=>{document.title="Tambah Material Movement"}),F(()=>{S(),t.value=null}),(W,r)=>(q(),Y(w,null,{default:o(()=>[l(s,{cols:"12",class:"d-flex justify-space-between align-items-center"},{default:o(()=>[L,l(b,{to:"/admin/material-movement",color:"primary"},{default:o(()=>[M(" Kembali ")]),_:1})]),_:1}),l(s,{cols:"12"},{default:o(()=>[l(G,null,{default:o(()=>[l(H,{onSubmit:Z(j,["prevent"])},{default:o(()=>[l(w,null,{default:o(()=>[l(s,{cols:"12",md:"6"},{default:o(()=>[l(g,{modelValue:u.value,"onUpdate:modelValue":r[0]||(r[0]=e=>u.value=e),label:"Kode",placeholder:"Kode Material Movement","error-messages":a(t)&&a(t).code?[a(t).code]:[]},null,8,["modelValue","error-messages"])]),_:1}),l(s,{cols:"12",md:"6"},{default:o(()=>[l(g,{modelValue:d.value,"onUpdate:modelValue":r[1]||(r[1]=e=>d.value=e),label:"Tanggal",placeholder:"Tanggal Material Movement","error-messages":a(t)&&a(t).date?[a(t).date]:[],type:"datetime-local"},null,8,["modelValue","error-messages"])]),_:1}),l(s,{cols:"12",md:"6"},{default:o(()=>[l(k,{modelValue:n.value,"onUpdate:modelValue":r[2]||(r[2]=e=>n.value=e),items:a(y),label:"Driver",placeholder:"Pilih Driver","error-messages":a(t)&&a(t).driver_id?[a(t).driver_id]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(s,{cols:"12",md:"6"},{default:o(()=>[l(k,{modelValue:v.value,"onUpdate:modelValue":r[3]||(r[3]=e=>v.value=e),items:a(D),label:"Truck",placeholder:"Pilih Truck","error-messages":a(t)&&a(t).truck_id?[a(t).truck_id]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(s,{cols:"12",md:"6"},{default:o(()=>[l(k,{modelValue:c.value,"onUpdate:modelValue":r[4]||(r[4]=e=>c.value=e),items:a(R),label:"POS",placeholder:"Pilih POS","error-messages":a(t)&&a(t).station_id?[a(t).station_id]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(s,{cols:"12",md:"6"},{default:o(()=>[l(k,{modelValue:p.value,"onUpdate:modelValue":r[5]||(r[5]=e=>p.value=e),items:a(O),label:"Pemeriksa",placeholder:"Pilih Pemeriksa","error-messages":a(t)&&a(t).checker_id?[a(t).checker_id]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),l(s,{cols:"12",md:"6"},{default:o(()=>[l(g,{modelValue:f.value,"onUpdate:modelValue":r[6]||(r[6]=e=>f.value=e),label:"Presentase Rasio Index",placeholder:"Masukan Presentase Rasio Index","error-messages":a(t)&&a(t).observation_ratio_percentage?[a(t).observation_ratio_percentage]:[],type:"number",step:"1",suffix:"%"},null,8,["modelValue","error-messages"])]),_:1}),l(s,{cols:"12",md:"6"},{default:o(()=>[l(g,{modelValue:_.value,"onUpdate:modelValue":r[7]||(r[7]=e=>_.value=e),label:"Rasio Padat",placeholder:"Masukan Rasio Padat","error-messages":a(t)&&a(t).solid_ratio?[a(t).solid_ratio]:[],step:"1"},null,8,["modelValue","error-messages"])]),_:1}),l(s,{cols:"12",md:"12"},{default:o(()=>[l(J,{modelValue:V.value,"onUpdate:modelValue":r[8]||(r[8]=e=>V.value=e),label:"Keterangan",placeholder:"Keterangan Material Movement","error-messages":a(t)&&a(t).remarks?[a(t).remarks]:[]},null,8,["modelValue","error-messages"])]),_:1}),l(s,{cols:"12",class:"d-flex gap-4"},{default:o(()=>[l(b,{type:"submit",loading:a(A),color:"primary"},{default:o(()=>[M(" Simpan ")]),_:1},8,["loading"]),l(b,{color:"secondary",variant:"tonal",onClick:S},{default:o(()=>[M(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{ge as default};
