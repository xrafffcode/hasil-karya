import{R as h,r as n,S as N,_ as $,l as B,n as D,q as r,x as e,I as V,v as j,O as q,c as t,Y as k,Z as z,A as u,s as Y}from"./index-a69e0c82.js";import{u as R}from"./vehicleRentalRecord-9971e4ee.js";import{u as S}from"./truck-8406cd86.js";import{u as x}from"./heavyVehicle-a28caf3e.js";import{V as Z,a as E}from"./VFileInput-bcc73e96.js";import{V as s,b as G,a as P}from"./VRow-03344ab6.js";import{V as J}from"./VForm-fb065eef.js";import{V as g}from"./VTextField-03e38bc1.js";import{V as U}from"./VAutocomplete-1e982d1d.js";import{b as L}from"./VSelect-2adf8cee.js";import"./VGrid-b0831086.js";import"./forwardRefs-e658ad70.js";import"./VChip-707cc8ab.js";import"./index-7cec823b.js";import"./VMenu-97c043ff.js";import"./VDivider-e33b9f13.js";import"./VOverlay-64f59fed.js";import"./VSelectionControl-88f5bb81.js";const Q=Y("h2",{class:"mb-0"}," Tambah Penyewaan Kendaraan ",-1),Ve={__name:"create-vehicle-rental-record",setup(W){const{loading:C,error:a}=h(R()),{createVehicleRentalRecord:A}=R(),{trucks:K}=h(S()),{fetchTrucks:I}=S(),{heavyVehicles:O}=h(x()),{fetchHeavyVehicles:F}=x();I(),F();const i=n("AUTO"),p=n(),c=n(),_=n(new Date(Date.now()-new Date().getTimezoneOffset()*6e4).toISOString().substr(0,16)),d=n("0"),m=n(""),v=n(0),f=n(""),b=n(null),y=n(""),w=()=>{i.value="AUTO",p.value=null,c.value=null,_.value=null,d.value=0,m.value=0,v.value=0,f.value="",b.value=null},H=()=>{A({code:i.value,truck_id:p.value,heavy_vehicle_id:c.value,start_date:_.value,rental_duration:d.value.replace(/\D/g,""),rental_cost:m.value.replace(/\D/g,""),is_paid:v.value,remarks:f.value,payment_proof_image:b.value})};N(()=>{document.title="Tambah Data Penyewaan Kendaraan"}),$(()=>{w(),a.value=null});const M=T=>{const o=T.target.files[0];o&&(b.value=o,y.value=o.name)};return(T,o)=>(B(),D(P,null,{default:r(()=>[e(a)&&!e(a).code&&!e(a).truck_id&&!e(a).heavy_vehicle_id&&!e(a).start_date&&!e(a).rental_duration&&!e(a).rental_cost&&!e(a).is_paid&&!e(a).remarks&&!e(a).payment_proof_image?(B(),D(Z,{key:0,type:"warning",closable:"","close-icon":"mdi-close","close-label":"Tutup",elevation:"2"},{default:r(()=>[V(j(e(a)),1)]),_:1})):q("",!0),t(s,{cols:"12",class:"d-flex justify-space-between align-items-center"},{default:r(()=>[Q,t(k,{to:"/admin/vehicle-rental-record",color:"primary"},{default:r(()=>[V(" Kembali ")]),_:1})]),_:1}),t(s,{cols:"12"},{default:r(()=>[t(G,null,{default:r(()=>[t(J,{onSubmit:z(H,["prevent"])},{default:r(()=>[t(P,null,{default:r(()=>[t(s,{cols:"12",md:"6"},{default:r(()=>[t(g,{modelValue:e(i),"onUpdate:modelValue":o[0]||(o[0]=l=>u(i)?i.value=l:null),label:"Kode",placeholder:"Kode Penyewaan Kendaraan","error-messages":e(a)&&e(a).code?[e(a).code]:[]},null,8,["modelValue","error-messages"])]),_:1}),t(s,{cols:"12",md:"6"},{default:r(()=>[t(U,{modelValue:e(p),"onUpdate:modelValue":o[1]||(o[1]=l=>u(p)?p.value=l:null),clearable:"",items:e(K),"item-title":l=>l.brand+" "+l.model,"item-value":l=>l.id,label:"Truk",placeholder:"Pilih Truk","error-messages":e(a)&&e(a).truck_id?[e(a).truck_id]:[]},null,8,["modelValue","items","item-title","item-value","error-messages"])]),_:1}),t(s,{cols:"12",md:"6"},{default:r(()=>[t(U,{modelValue:e(c),"onUpdate:modelValue":o[2]||(o[2]=l=>u(c)?c.value=l:null),clearable:"",items:e(O),"item-title":l=>l.brand+" "+l.model,"item-value":l=>l.id,label:"Alat Berat",placeholder:"Pilih Alat Berat","error-messages":e(a)&&e(a).heavy_vehicle_id?[e(a).heavy_vehicle_id]:[]},null,8,["modelValue","items","item-title","item-value","error-messages"])]),_:1}),t(s,{cols:"12",md:"6"},{default:r(()=>[t(g,{modelValue:e(_),"onUpdate:modelValue":o[3]||(o[3]=l=>u(_)?_.value=l:null),label:"Tanggal Mulai",placeholder:"Tanggal Mulai",type:"datetime-local","error-messages":e(a)&&e(a).start_date?[e(a).start_date]:[]},null,8,["modelValue","error-messages"])]),_:1}),t(s,{cols:"12",md:"6"},{default:r(()=>[t(g,{modelValue:e(d),"onUpdate:modelValue":o[4]||(o[4]=l=>u(d)?d.value=l:null),label:"Durasi Penyewaan (Hari)",placeholder:"Durasi Penyewaan (Hari)","error-messages":e(a)&&e(a).rental_duration?[e(a).rental_duration]:[],onInput:o[5]||(o[5]=l=>d.value=e(d).replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","))},null,8,["modelValue","error-messages"])]),_:1}),t(s,{cols:"12",md:"6"},{default:r(()=>[t(g,{modelValue:e(m),"onUpdate:modelValue":o[6]||(o[6]=l=>u(m)?m.value=l:null),label:"Biaya Penyewaan",placeholder:"Biaya Penyewaan","error-messages":e(a)&&e(a).rental_cost?[e(a).rental_cost]:[],onInput:o[7]||(o[7]=l=>m.value=e(m).replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,","))},{"prepend-inner":r(()=>[V(" Rp ")]),_:1},8,["modelValue","error-messages"])]),_:1}),t(s,{cols:"12",md:"6"},{default:r(()=>[t(L,{modelValue:e(v),"onUpdate:modelValue":o[8]||(o[8]=l=>u(v)?v.value=l:null),label:"Status Pembayaran",items:[{text:"Belum Dibayar",value:0},{text:"Sudah Dibayar",value:1}],"item-title":l=>l.text,"item-value":l=>l.value,"error-messages":e(a)&&e(a).is_paid?[e(a).is_paid]:[]},null,8,["modelValue","item-title","item-value","error-messages"])]),_:1}),t(s,{cols:"12",md:"6"},{default:r(()=>[t(g,{modelValue:e(f),"onUpdate:modelValue":o[9]||(o[9]=l=>u(f)?f.value=l:null),label:"Catatan",placeholder:"Catatan","error-messages":e(a)&&e(a).remarks?[e(a).remarks]:[]},null,8,["modelValue","error-messages"])]),_:1}),t(s,{cols:"12",md:"12"},{default:r(()=>[t(E,{modelValue:e(y),"onUpdate:modelValue":o[10]||(o[10]=l=>u(y)?y.value=l:null),label:"Bukti Pembayaran",placeholder:"Pilih Berkas","error-messages":e(a)&&e(a).payment_proof_image?[e(a).payment_proof_image]:[],onChange:M},null,8,["modelValue","error-messages"])]),_:1}),t(s,{cols:"12",class:"d-flex gap-4"},{default:r(()=>[t(k,{type:"submit",loading:e(C),color:"primary"},{default:r(()=>[V(" Simpan ")]),_:1},8,["loading"]),t(k,{color:"secondary",variant:"tonal",onClick:w},{default:r(()=>[V(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{Ve as default};
