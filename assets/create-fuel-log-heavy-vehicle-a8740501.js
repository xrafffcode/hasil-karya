import{R as n,r as u,S as $,_ as q,l as D,J as z,x as l,n as E,q as r,c as a,I as v,v as J,Y as h,A as Y,O as Z,Z as Q,K as W,s as X}from"./index-a69e0c82.js";import{u as T}from"./fuelLog-b7b9becd.js";import{u as U}from"./driver-fb3fe64c.js";import{u as k}from"./heavyVehicle-a28caf3e.js";import{u as O}from"./station-88358ae3.js";import{u as M}from"./gasOperator-0a65d517.js";import{b as A,d as ee,e as le,V as s,a as C}from"./VRow-03344ab6.js";import{V as ae}from"./VDialog-d7a653e8.js";import{V as te}from"./VForm-fb065eef.js";import{V as B}from"./VTextField-03e38bc1.js";import{V as b}from"./VAutocomplete-1e982d1d.js";import{V as oe}from"./VTextarea-d6921a11.js";import"./VGrid-b0831086.js";import"./VOverlay-64f59fed.js";import"./forwardRefs-e658ad70.js";import"./index-7cec823b.js";import"./VSelect-2adf8cee.js";import"./VMenu-97c043ff.js";import"./VDivider-e33b9f13.js";import"./VSelectionControl-88f5bb81.js";import"./VChip-707cc8ab.js";const re=X("h2",{class:"mb-0"}," Catat BBM Alat Berat ",-1),Oe={__name:"create-fuel-log-heavy-vehicle",setup(se){const{gasOperators:w}=n(M()),{drivers:H}=n(U()),{heavyVehicles:P}=n(k()),{stations:F}=n(O()),{fetchGasOperators:K}=M(),{fetchDrivers:R}=U(),{fetchHeavyVehicles:L}=k(),{fetchStations:I}=O();K(),R(),L(),I({type:"gas_station"});const{success:m,loading:N,error:t}=n(T()),{createFuelLogHeavyVehicle:j}=T(),p=u("AUTO"),V=u(new Date(Date.now()-new Date().getTimezoneOffset()*6e4).toISOString().substr(0,16)),f=u(""),g=u(""),c=u(""),_=u(""),x=u("diesel"),i=u(""),d=u(""),y=u(""),S=()=>{p.value="AUTO",V.value=null,f.value="",g.value="",c.value="",_.value="",x.value="diesel",i.value="",d.value="",y.value=""},G=()=>{j({code:p.value,date:V.value.split("T").join(" ")+":00",heavy_vehicle_id:f.value,driver_id:g.value,station_id:c.value,gas_operator_id:_.value,fuel_type:x.value,volume:i.value.replace(/\D/g,""),hourmeter:d.value.replace(/\D/g,""),remarks:y.value}),S()};return $(()=>{document.title="Tambah Data Pengisian Bahan Bakar Alat Berat"}),q(()=>{S(),t.value=null}),(ue,o)=>(D(),z(W,null,[l(m)?(D(),E(ae,{key:0,modelValue:l(m),"onUpdate:modelValue":o[1]||(o[1]=e=>Y(m)?m.value=e:null),"max-width":"400"},{default:r(()=>[a(A,null,{default:r(()=>[a(ee,null,{default:r(()=>[v(J(l(m)),1)]),_:1}),a(le,null,{default:r(()=>[a(h,{color:"primary",text:"",onClick:o[0]||(o[0]=()=>m.value=null)},{default:r(()=>[v(" Tutup ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])):Z("",!0),a(C,null,{default:r(()=>[a(s,{cols:"12",class:"d-flex justify-space-between align-items-center"},{default:r(()=>[re,a(h,{to:"/admin/fuel-log",color:"primary",text:""},{default:r(()=>[v(" Kembali ")]),_:1})]),_:1}),a(s,{cols:"12"},{default:r(()=>[a(A,null,{default:r(()=>[a(te,{onSubmit:Q(G,["prevent"])},{default:r(()=>[a(C,null,{default:r(()=>[a(s,{cols:"12",md:"6"},{default:r(()=>[a(B,{modelValue:p.value,"onUpdate:modelValue":o[2]||(o[2]=e=>p.value=e),label:"Kode",placeholder:"Kode","error-messages":l(t)&&l(t).code?[l(t).code]:[]},null,8,["modelValue","error-messages"])]),_:1}),a(s,{cols:"12",md:"6"},{default:r(()=>[a(B,{modelValue:V.value,"onUpdate:modelValue":o[3]||(o[3]=e=>V.value=e),label:"Tanggal Mulai",placeholder:"Tanggal Mulai",type:"datetime-local","error-messages":l(t)&&l(t).date?[l(t).date]:[]},null,8,["modelValue","error-messages"])]),_:1}),a(s,{cols:"12",md:"6"},{default:r(()=>[a(b,{modelValue:_.value,"onUpdate:modelValue":o[4]||(o[4]=e=>_.value=e),items:l(w),label:"Solar Man",placeholder:"Pilih Operator","error-messages":l(t)&&l(t).gas_operator_id?[l(t).gas_operator_id]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),a(s,{cols:"12",md:"6"},{default:r(()=>[a(b,{modelValue:g.value,"onUpdate:modelValue":o[5]||(o[5]=e=>g.value=e),items:l(H),label:"Driver",placeholder:"Pilih Driver","error-messages":l(t)&&l(t).driver_id?[l(t).driver_id]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),a(s,{cols:"12",md:"6"},{default:r(()=>[a(b,{modelValue:f.value,"onUpdate:modelValue":o[6]||(o[6]=e=>f.value=e),items:l(P),label:"Alat Berat",placeholder:"Pilih Alat Berat","error-messages":l(t)&&l(t).heavy_vehicle_id?[l(t).heavy_vehicle_id]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),a(s,{cols:"12",md:"6"},{default:r(()=>[a(b,{modelValue:c.value,"onUpdate:modelValue":o[7]||(o[7]=e=>c.value=e),items:l(F),label:"POS",placeholder:"Pilih POS","error-messages":l(t)&&l(t).station_id?[l(t).station_id]:[],"item-title":e=>e.name,"item-value":e=>e.id},null,8,["modelValue","items","error-messages","item-title","item-value"])]),_:1}),a(s,{cols:"12",md:"6"},{default:r(()=>[a(B,{modelValue:i.value,"onUpdate:modelValue":o[8]||(o[8]=e=>i.value=e),label:"Volume BBM (L)",placeholder:"Volume BBM (L)","error-messages":l(t)&&l(t).volume?[l(t).volume]:[],onInput:o[9]||(o[9]=e=>i.value=i.value.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,"."))},null,8,["modelValue","error-messages"])]),_:1}),a(s,{cols:"12",md:"6"},{default:r(()=>[a(B,{modelValue:d.value,"onUpdate:modelValue":o[10]||(o[10]=e=>d.value=e),label:"Hourmeter (HM)",placeholder:"Hourmeter (HM)","error-messages":l(t)&&l(t).hourmeter?[l(t).hourmeter]:[],onInput:o[11]||(o[11]=e=>d.value=d.value.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,"."))},null,8,["modelValue","error-messages"])]),_:1}),a(s,{cols:"12",md:"12"},{default:r(()=>[a(oe,{modelValue:y.value,"onUpdate:modelValue":o[12]||(o[12]=e=>y.value=e),label:"Keterangan",placeholder:"Keterangan Pengisian Bahan Bakar","error-messages":l(t)&&l(t).remarks?[l(t).remarks]:[]},null,8,["modelValue","error-messages"])]),_:1}),a(s,{cols:"12",class:"d-flex gap-4"},{default:r(()=>[a(h,{type:"submit",loading:l(N),color:"primary"},{default:r(()=>[v(" Simpan ")]),_:1},8,["loading"]),a(h,{color:"secondary",variant:"tonal",onClick:S},{default:r(()=>[v(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64))}};export{Oe as default};
