import{R as w,j as Y,r as n,S,_ as Z,l as b,n as P,q as r,x as e,I as k,v as z,O as x,c as t,Y as T,Z as G,A as u,J as L,s as I}from"./index-a69e0c82.js";import{u as U}from"./vehicleRentalRecord-9971e4ee.js";import{u as D}from"./truck-8406cd86.js";import{u as C}from"./heavyVehicle-a28caf3e.js";import{V as Q,a as W}from"./VFileInput-bcc73e96.js";import{V as s,b as X,a as K}from"./VRow-03344ab6.js";import{V as $}from"./VForm-fb065eef.js";import{V as g}from"./VTextField-03e38bc1.js";import{V as A}from"./VAutocomplete-1e982d1d.js";import{b as ee}from"./VSelect-2adf8cee.js";import{a as ae}from"./VGrid-b0831086.js";import"./forwardRefs-e658ad70.js";import"./VChip-707cc8ab.js";import"./index-7cec823b.js";import"./VMenu-97c043ff.js";import"./VDivider-e33b9f13.js";import"./VOverlay-64f59fed.js";import"./VSelectionControl-88f5bb81.js";const le=I("h2",{class:"mb-0"}," Ubah Data Penyewaan Kendaraan ",-1),te={key:0},oe=I("br",null,null,-1),we={__name:"edit-vehicle-rental-record",setup(re){const{loading:M,error:l}=w(U()),{fetchVehicleRentalRecord:j,updateVehicleRentalRecord:N}=U(),{trucks:E}=w(D()),{fetchTrucks:F}=D(),{heavyVehicles:H}=w(C()),{fetchHeavyVehicles:O}=C();F(),O();const B=Y().params.id,m=n("AUTO"),c=n(),p=n(),d=n(),_=n(),v=n(),V=n(0),f=n(""),i=n(null),h=n(null),R=async()=>{var y,o;try{const a=await j(B);m.value=a.code,c.value=(y=a.truck)==null?void 0:y.id,p.value=(o=a.heavy_vehicle)==null?void 0:o.id,d.value=a.start_date.split(":").slice(0,2).join(":"),_.value=a.rental_duration*1,v.value=a.rental_cost*1,V.value=a.is_paid===!0?1:0,f.value=a.remarks,i.value=null,h.value=a.payment_proof_image_url}catch(a){console.error(a)}},q=()=>{const y=d.value?d.value.split("T").join(" ")+":00":null,o=i.value?i.value[0]:null;N({code:m.value,id:B,truck_id:c.value,heavy_vehicle_id:p.value,start_date:y,rental_duration:_.value,rental_cost:v.value,is_paid:V.value,remarks:f.value,payment_proof_image:o})};S(()=>{R(),document.title="Edit Penyewaan Kendaraan"}),S(()=>{R(),document.title="Edit Penyewaan Kendaraan"}),Z(()=>{l.value=null});const J=()=>{R()};return(y,o)=>(b(),P(K,null,{default:r(()=>[e(l)&&!e(l).code&&!e(l).truck_id&&!e(l).heavy_vehicle_id&&!e(l).start_date&&!e(l).rental_duration&&!e(l).rental_cost&&!e(l).is_paid&&!e(l).remarks&&!e(l).payment_proof_image?(b(),P(Q,{key:0,type:"warning",closable:"","close-icon":"mdi-close","close-label":"Tutup",elevation:"2"},{default:r(()=>[k(z(e(l)),1)]),_:1})):x("",!0),t(s,{cols:"12",class:"d-flex justify-space-between align-items-center"},{default:r(()=>[le,t(T,{to:"/admin/vehicle-rental-record",color:"primary"},{default:r(()=>[k(" Kembali ")]),_:1})]),_:1}),t(s,{cols:"12"},{default:r(()=>[t(X,null,{default:r(()=>[t($,{onSubmit:G(q,["prevent"])},{default:r(()=>[t(K,null,{default:r(()=>[t(s,{cols:"12",md:"6"},{default:r(()=>[t(g,{modelValue:e(m),"onUpdate:modelValue":o[0]||(o[0]=a=>u(m)?m.value=a:null),label:"Kode",placeholder:"Kode Penyewaan Kendaraan","error-messages":e(l)&&e(l).code?[e(l).code]:[]},null,8,["modelValue","error-messages"])]),_:1}),t(s,{cols:"12",md:"6"},{default:r(()=>[t(A,{modelValue:e(c),"onUpdate:modelValue":o[1]||(o[1]=a=>u(c)?c.value=a:null),items:e(E),"item-title":a=>a.brand+" "+a.model,"item-value":a=>a.id,label:"Truk",placeholder:"Pilih Truk",clearable:"","error-messages":e(l)&&e(l).truck_id?[e(l).truck_id]:[]},null,8,["modelValue","items","item-title","item-value","error-messages"])]),_:1}),t(s,{cols:"12",md:"6"},{default:r(()=>[t(A,{modelValue:e(p),"onUpdate:modelValue":o[2]||(o[2]=a=>u(p)?p.value=a:null),items:e(H),"item-title":a=>a.brand+" "+a.model,"item-value":a=>a.id,label:"Alat Berat",placeholder:"Pilih Alat Berat",clearable:"","error-messages":e(l)&&e(l).heavy_vehicle_id?[e(l).heavy_vehicle_id]:[]},null,8,["modelValue","items","item-title","item-value","error-messages"])]),_:1}),t(s,{cols:"12",md:"6"},{default:r(()=>[t(g,{modelValue:e(d),"onUpdate:modelValue":o[3]||(o[3]=a=>u(d)?d.value=a:null),label:"Tanggal Mulai",placeholder:"Tanggal Mulai",type:"datetime-local","error-messages":e(l)&&e(l).start_date?[e(l).start_date]:[]},null,8,["modelValue","error-messages"])]),_:1}),t(s,{cols:"12",md:"6"},{default:r(()=>[t(g,{modelValue:e(_),"onUpdate:modelValue":o[4]||(o[4]=a=>u(_)?_.value=a:null),label:"Durasi Penyewaan (Hari)",placeholder:"Masukkan Durasi Penyewaan","error-messages":e(l)&&e(l).rental_duration?[e(l).rental_duration]:[],type:"number"},null,8,["modelValue","error-messages"])]),_:1}),t(s,{cols:"12",md:"6"},{default:r(()=>[t(g,{modelValue:e(v),"onUpdate:modelValue":o[5]||(o[5]=a=>u(v)?v.value=a:null),label:"Biaya Penyewaan",placeholder:"Biaya Penyewaan","error-messages":e(l)&&e(l).rental_cost?[e(l).rental_cost]:[]},null,8,["modelValue","error-messages"])]),_:1}),t(s,{cols:"12",md:"6"},{default:r(()=>[t(ee,{modelValue:e(V),"onUpdate:modelValue":o[6]||(o[6]=a=>u(V)?V.value=a:null),label:"Status Pembayaran",items:[{text:"Belum Dibayar",value:0},{text:"Sudah Dibayar",value:1}],"item-title":a=>a.text,"item-value":a=>a.value,"error-messages":e(l)&&e(l).is_paid?[e(l).is_paid]:[]},null,8,["modelValue","item-title","item-value","error-messages"])]),_:1}),t(s,{cols:"12",md:"6"},{default:r(()=>[t(g,{modelValue:e(f),"onUpdate:modelValue":o[7]||(o[7]=a=>u(f)?f.value=a:null),label:"Catatan",placeholder:"Catatan","error-messages":e(l)&&e(l).remarks?[e(l).remarks]:[]},null,8,["modelValue","error-messages"])]),_:1}),t(s,{cols:"12",md:"6"},{default:r(()=>[e(h)?(b(),L("p",te," Bukti Pembayaran ")):x("",!0),e(h)?(b(),P(ae,{key:1,src:e(h),width:"100px",height:"100px"},null,8,["src"])):x("",!0),oe,t(e(W),{modelValue:e(i),"onUpdate:modelValue":o[8]||(o[8]=a=>u(i)?i.value=a:null),label:"Bukti Pembayaran",placeholder:"Pilih Berkas","error-messages":e(l)&&e(l).payment_proof_image?[e(l).payment_proof_image]:[]},null,8,["modelValue","error-messages"])]),_:1}),t(s,{cols:"12",class:"d-flex gap-4"},{default:r(()=>[t(T,{type:"submit",loading:e(M),color:"primary"},{default:r(()=>[k(" Simpan ")]),_:1},8,["loading"]),t(T,{color:"secondary",variant:"tonal",onClick:J},{default:r(()=>[k(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{we as default};
