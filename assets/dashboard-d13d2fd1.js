import{P as vt,Q as yt,H as St,R as v,r as s,S as gt,k as kt,l,n as Ct,q as e,c as t,I as r,v as d,x as m,s as o,J as _,N as D,y as T,K as V,T as bt,U as Bt}from"./index-a69e0c82.js";import{u as J}from"./driver-fb3fe64c.js";import{u as A}from"./station-88358ae3.js";import{u as W}from"./truck-8406cd86.js";import{u as j}from"./checker-f2b07ddc.js";import{u as Rt}from"./materialMovement-7e598da6.js";import{_ as Dt}from"./_plugin-vue_export-helper-c27b6911.js";import{V as n,a as X,b as p,c as x,d as h}from"./VRow-03344ab6.js";import"./VGrid-b0831086.js";const Z=vt({id:"common",state:()=>({datePeriods:[],loading:!1,error:null,success:null}),actions:{async fetchDatePeriods(){try{this.loading=!0;const u=await yt.get("/commons/read/date-periods");this.datePeriods=u.data.data}catch(u){this.handleError(u)}finally{this.loading=!1}}}});const y=u=>(bt("data-v-bf20e138"),u=u(),Bt(),u),Tt=y(()=>o("h1",null,"Dashboard",-1)),Vt={class:"d-flex gap-3 mt-3"},xt=["onClick"],wt={class:"d-flex gap-3 mt-3"},Mt=["onClick"],Ut=y(()=>o("h3",null,"DUMPTRUCK",-1)),Et=y(()=>o("h3",null,"RITAGE / DAY",-1)),It={class:"d-flex gap-3 mt-3"},Pt=["onClick"],At={class:"d-flex gap-3 mt-3"},Ot=["onClick"],Nt=y(()=>o("h3",null,"MEASUREMENT VOLUME",-1)),Qt=y(()=>o("h3",null,"RITAGE VOLUME",-1)),Lt=y(()=>o("h4",null," Ratio / Measurement by Ritage ",-1)),$t={__name:"dashboard",setup(u){const{user:Ft,checkAuth:tt}=St();tt();async function et(b,B){return await b(B)}const{fetchDrivers:at}=J(),{fetchStations:st,fetchStationCategoriesWithoutGas:ot}=A(),{fetchTrucks:nt}=W(),{fetchCheckers:it}=j(),{fetchStatisticTruckPerDayByStation:lt,fetchStatisticRitagePerDayByStation:ut,fetchStatisticMeasurementVolumeByStation:ct,fetchStatisticRitageVolumeByStation:rt,fetchRatioMeasurementByRitage:dt}=Rt(),{fetchDatePeriods:mt}=Z(),_t=v(J()).drivers,pt=v(A()).stations,O=v(A()).categories,ht=v(W()).trucks,ft=v(j()).checkers,N=v(Z()).datePeriods;mt(),at(),st(),ot(),nt(),it();const w=s("all"),M=s("all"),U=s("all"),k=s("all"),E=s("Quary"),I=s("Quary"),P=s("Quary"),C=s("Quary"),Q=s({}),L=s([]),$=s({}),F=s([]),G=s({}),z=s([]),K=s({}),Y=s([]),q=s({}),H=s([]);async function S(b,B,c,a,f){const R=await et(b,B);c.value={chart:{width:"100%",type:f},legend:{position:"right"},labels:R.map(i=>i.station),responsive:[{breakpoint:480,options:{chart:{width:"100%"},legend:{position:"bottom"}}}]},a.value=R.map(i=>i.value),f==="bar"&&(c.value={chart:{height:350,type:f},plotOptions:{bar:{borderRadius:4,horizontal:!0}},xaxis:{categories:R.map(i=>i.station)},legend:{position:"right"},dataLabels:{enabled:!0,formatter:function(i){return i.toFixed(2)+"%"},offsetY:-20}},a.value=[{name:"Ratio",data:R.map(i=>i.value)}])}async function g(){await S(lt,{statistic_type:"count",date_type:w.value,station_category:E.value},Q,L,"pie"),await S(ut,{statistic_type:"avg",date_type:M.value,station_category:I.value},$,F,"pie"),await S(ct,{statistic_type:"sum",date_type:U.value,station_category:P.value},G,z,"pie"),await S(rt,{statistic_type:"sum",date_type:k.value,station_category:C.value},K,Y,"pie"),await S(dt,{statistic_type:"avg",date_type:k.value,station_category:C.value},q,H,"bar")}return g(),gt(()=>{document.title="Dashboard"}),(b,B)=>{const c=kt("apexchart");return l(),Ct(n,null,{default:e(()=>[t(X,null,{default:e(()=>[Tt]),_:1}),t(X,{class:"mt-3"},{default:e(()=>[t(n,{sm:"12",md:"6",lg:"3"},{default:e(()=>[t(p,null,{default:e(()=>[t(x,null,{default:e(()=>[r(" Total Driver ")]),_:1}),t(h,null,{default:e(()=>[r(d(m(_t).length),1)]),_:1})]),_:1})]),_:1}),t(n,{sm:"12",md:"6",lg:"3"},{default:e(()=>[t(p,null,{default:e(()=>[t(x,null,{default:e(()=>[r(" Total Station ")]),_:1}),t(h,null,{default:e(()=>[r(d(m(pt).length),1)]),_:1})]),_:1})]),_:1}),t(n,{sm:"12",md:"6",lg:"3"},{default:e(()=>[t(p,null,{default:e(()=>[t(x,null,{default:e(()=>[r(" Total Truck ")]),_:1}),t(h,null,{default:e(()=>[r(d(m(ht).length),1)]),_:1})]),_:1})]),_:1}),t(n,{sm:"12",md:"6",lg:"3"},{default:e(()=>[t(p,null,{default:e(()=>[t(x,null,{default:e(()=>[r(" Total Checker ")]),_:1}),t(h,null,{default:e(()=>[r(d(m(ft).length),1)]),_:1})]),_:1})]),_:1}),t(n,{sm:"12",md:"12",lg:"12"},{default:e(()=>[o("div",Vt,[(l(!0),_(V,null,D(m(N),a=>(l(),_("div",{key:a},[o("button",{class:T(["btn-filter",{active:w.value===a.name&&M.value===a.name}]),onClick:f=>{w.value=a.name,M.value=a.name,g()}},d(a.name.toUpperCase()),11,xt)]))),128))]),o("div",wt,[(l(!0),_(V,null,D(m(O),a=>(l(),_("div",{key:a},[o("button",{class:T(["btn-filter",{active:E.value===a.name&&I.value===a.name}]),onClick:f=>{E.value=a.name,I.value=a.name,g()}},d(a.name.toUpperCase()),11,Mt)]))),128))])]),_:1}),t(n,{sm:"12",md:"6",lg:"6"},{default:e(()=>[t(p,{class:"pa-3"},{default:e(()=>[Ut,t(h,null,{default:e(()=>[t(c,{width:"500",type:"pie",options:Q.value,series:L.value},null,8,["options","series"])]),_:1})]),_:1})]),_:1}),t(n,{sm:"12",md:"6",lg:"6"},{default:e(()=>[t(p,{class:"pa-3"},{default:e(()=>[Et,t(h,null,{default:e(()=>[t(c,{width:"500",type:"pie",options:$.value,series:F.value},null,8,["options","series"])]),_:1})]),_:1})]),_:1}),t(n,{sm:"12",md:"12",lg:"12"},{default:e(()=>[o("div",It,[(l(!0),_(V,null,D(m(N),a=>(l(),_("div",{key:a},[o("button",{class:T(["btn-filter",{active:U.value===a.name&&k.value===a.name}]),onClick:f=>{U.value=a.name,k.value=a.name,g()}},d(a.name.toUpperCase()),11,Pt)]))),128))]),o("div",At,[(l(!0),_(V,null,D(m(O),a=>(l(),_("div",{key:a},[o("button",{class:T(["btn-filter",{active:P.value===a.name&&C.value===a.name}]),onClick:f=>{P.value=a.name,C.value=a.name,g()}},d(a.name.toUpperCase()),11,Ot)]))),128))])]),_:1}),t(n,{sm:"12",md:"6",lg:"6"},{default:e(()=>[t(p,{class:"pa-3"},{default:e(()=>[Nt,t(h,null,{default:e(()=>[t(c,{width:"500",type:"pie",options:K.value,series:Y.value},null,8,["options","series"])]),_:1})]),_:1})]),_:1}),t(n,{sm:"12",md:"6",lg:"6"},{default:e(()=>[t(p,{class:"pa-3"},{default:e(()=>[Qt,t(h,null,{default:e(()=>[t(c,{width:"500",type:"pie",options:G.value,series:z.value},null,8,["options","series"])]),_:1})]),_:1})]),_:1}),t(n,{sm:"12",md:"12",lg:"12"},{default:e(()=>[Lt,t(c,{type:"bar",height:"350",options:q.value,series:H.value},null,8,["options","series"])]),_:1})]),_:1})]),_:1})}}},Xt=Dt($t,[["__scopeId","data-v-bf20e138"]]);export{Xt as default};
